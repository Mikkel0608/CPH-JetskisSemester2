<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>CPH Jetskis</title>
    <link rel="stylesheet" type="text/css" href="../CSS/styles.css">
</head>

<body style="background-color:rgb(245, 246, 250)">

<!-- Navigation bar and navigation buttons -->
<div id="naviBar">
    <div>
        <h1 id="headTitle">CPH JETSKIS </h1>
    </div>
    <a href="index.html"><button id="buttonStyle"> Forside </button></a>
    <button onclick="checkLoginOrderPage()" style="border-right-width: 0; border-left-width: 0" id="buttonStyle"> Bestil tid </button></a>
    <button onclick="checkLoginProfilePage()" id="buttonStyle"> Profil </button> </a>
    <!-- If user is active in localStorage, show the users phone: -->
    <button id="loginPhone"> </button>
</div>
<br>
<br>
<br>
<br>
<br>

<form id = "updatepassword">
    <!--<input id="currentPassword" name="currentPassword" type="text" placeholder="NuvÃ¦rende password">-->
    <input id="newPassword" name="newPassword" type="text" placeholder="Nyt password" value="">
    <input type="submit">
</form>


<script type="text/javascript" src="Javascript/profile.js"></script>
<script>
    var form = document.getElementById('updatepassword');
    var password = {
        password: document.getElementById('newPassword').value
    };

    window.onload = function(){
        fetch('http://localhost:3000/profile/userinfo')
            .then(response => response.json())
            .then(json => {
                console.log(json.userid);
                //form.action = `/profile/updatepassword/update/${json.userid}`;

                form.onsubmit = (event)=>{
                    event.preventDefault();

                    fetch(`http://localhost:3000/profile/updatepassword/update/${json.userid}`,{
                        method: 'PUT',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(password)/*JSON.stringify(new FormData(form))*/
                    }).then(response => response.json())
                        .then(json => console.log(json))
                };

            });
    };

</script>
</body>

</html>